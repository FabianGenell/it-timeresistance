{% doc %}
  Renders star rating icons based on a numeric rating value

  @param {number} rating - The rating value (0-5) to display as stars (required)

  @example
  Full rating
  {% render 'star-rating', rating: 5 %}
  @example
  Partial rating
  {% render 'star-rating', rating: 3.5 %}
  @example
  Product rating
  {% render 'star-rating', rating: product.metafields.reviews.rating.value %}
{% enddoc %}

{%- liquid
  assign max_star_rating = 5
  assign solid_star_rating = rating | floor
  assign remaining_stars = max_star_rating | minus: rating
-%}

{%- for star in (1..solid_star_rating) -%}
  {%- render 'icon' with icon: 'star-filled' -%}
{%- endfor -%}

{%- if remaining_stars > 0 -%}
  {%- assign remaining_stars_includes_half_star = remaining_stars | modulo: 1 -%}
  {%- if remaining_stars_includes_half_star != 0 -%}
    {%- render 'icon' with icon: 'star-half' -%}
  {%- endif -%}

  {%- assign remaining_empty_stars = remaining_stars | floor -%}

  {%- if remaining_empty_stars > 0 -%}
    {%- for empty_star in (1..remaining_empty_stars) -%}
      {%- render 'icon' with icon: 'star-empty' -%}
    {%- endfor -%}
  {%- endif -%}
{%- endif -%}
