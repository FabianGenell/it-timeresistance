<!-- File: sections/custom-video.liquid -->
{%- if section.settings.enable_section_style -%}
  {%- render 'section-style', section: section -%}
{%- endif -%}

{%- liquid
  assign mobile_video = section.settings.video_mobile
  assign mobile_poster_image = section.settings.mobile_poster_image

  assign desktop_video = section.settings.video_desktop
  assign desktop_poster_image = section.settings.desktop_poster_image

  assign large_video = section.settings.video_large
  assign large_poster_image = section.settings.large_poster_image

  if section.settings.full_width
    assign full_width_class = 'section--full-width'
  endif
-%}

<div
  class="
    relative w-full -my-[1px] md:-my-0
    section {{full_width_class}} {{ section.settings.section_padding }}
    {% if settings.enable_section_animations and section.settings.enable_animation -%}
      animation animation--custom-video
    {%- endif -%}
  "
  data-section-id="{{ section.id }}"
>
  <div class="relative w-full">
    {%- render 'responsive-video',
      video: desktop_video,
      mobile_video: mobile_video,
      large_video: large_video,
      class: 'relative w-full overflow-hidden',
      poster_image: desktop_poster_image,
      mobile_poster_image: mobile_poster_image,
      large_poster_image: large_poster_image,
      autoplay: section.settings.autoplay,
      show_native_controls: section.settings.show_native_controls
    -%}
  </div>
</div>

{% schema %}
{
  "name": "Custom Video",
  "tag": "section",
  "class": "shopify-section--full-width",
  "settings": [
    {
      "type": "checkbox",
      "id": "full_width",
      "label": "Full width",
      "default": true
    },
    {
      "type": "header",
      "content": "Video sources"
    },
    {
      "type": "video",
      "id": "video_desktop",
      "label": "Desktop video",
      "info": "Main video for desktop screens"
    },
    {
      "type": "video",
      "id": "video_mobile",
      "label": "Mobile video",
      "info": "Optional optimized video for mobile screens"
    },
    {
      "type": "video",
      "id": "video_large",
      "label": "Large screen video",
      "info": "Optional high-resolution video for large screens"
    },
    {
      "type": "header",
      "content": "Video Poster Images"
    },
    {
      "type": "image_picker",
      "id": "desktop_poster_image",
      "label": "Desktop poster image",
      "info": "Main poster image for desktop screens"
    },
    {
      "type": "image_picker",
      "id": "mobile_poster_image",
      "label": "Mobile poster image",
      "info": "Optional poster image for mobile screens",
      "visible_if": "{{ section.settings.video_mobile != blank }}"
    },
    {
      "type": "image_picker",
      "id": "large_poster_image",
      "label": "Large screen poster image",
      "info": "Optional poster image for large screens",
      "visible_if": "{{ section.settings.video_large != blank }}"
    },
    {
      "type": "header",
      "content": "Playback Settings"
    },
    {
      "type": "checkbox",
      "id": "autoplay",
      "label": "Autoplay video when in viewport",
      "default": true,
      "info": "Video will play automatically when it comes into view (muted)"
    },
    {
      "type": "checkbox",
      "id": "show_native_controls",
      "label": "Show native controls",
      "default": false
    },
    {
      "type": "header",
      "content": "Section Padding"
    },
    {
      "type": "checkbox",
      "id": "enable_section_style",
      "label": "Enable Custom Padding",
      "default": false
    },
    {
      "type": "number",
      "id": "section_padding_top",
      "label": "Padding Top",
      "visible_if": "{{ section.settings.enable_section_style == true }}",
      "default": 0
    },
    {
      "type": "number",
      "id": "section_padding_bottom",
      "label": "Padding Bottom",
      "visible_if": "{{ section.settings.enable_section_style == true }}",
      "default": 0
    },
    {
      "type": "checkbox",
      "id": "enable_section_style_mobile",
      "label": "Enable Custom Padding (Mobile)",
      "visible_if": "{{ section.settings.enable_section_style == true }}",
      "default": false
    },
    {
      "type": "number",
      "id": "section_padding_top_mobile",
      "label": "Padding Top (Mobile)",
      "visible_if": "{{ section.settings.enable_section_style_mobile == true and section.settings.enable_section_style == true }}",
      "default": 0
    },
    {
      "type": "number",
      "id": "section_padding_bottom_mobile",
      "label": "Padding Bottom (Mobile)",
      "visible_if": "{{ section.settings.enable_section_style_mobile == true and section.settings.enable_section_style == true }}",
      "default": 0
    },
    {
      "type": "select",
      "id": "section_padding",
      "label": "t:shared.settings.section_style.section_padding.label",
      "default": "section--vertical-padding-top-bottom",
      "visible_if": "{{ section.settings.enable_section_style == false }}",
      "options": [
        {
          "label": "t:shared.settings.section_style.section_padding.option_none",
          "value": "section--vertical-padding-none"
        },
        {
          "label": "t:shared.settings.section_style.section_padding.option_both",
          "value": "section--vertical-padding-top-bottom"
        },
        {
          "label": "t:shared.settings.section_style.section_padding.option_top",
          "value": "section--vertical-padding-top-only"
        },
        {
          "label": "t:shared.settings.section_style.section_padding.option_bottom",
          "value": "section--vertical-padding-bottom-only"
        }
      ]
    }
  ],

  "presets": [
    {
      "name": "Custom Video",
      "blocks": []
    }
  ]
}
{% endschema %}
