{% doc %}
  Renders a gallery media item with image/video and optional overlay label

  @param {object} block - Current block with settings (required)
  @param {string} aspect_ratio - Aspect ratio for the media (required)
  @param {string} label_style - Label positioning: 'overlay' or other (required)
  @param {string} label_size - Size class for the label text (required)
  @param {string} overlay_text_color - Text color for overlay labels (required)
  @param {string} overlay_text_background - Background color for overlay labels (required)
  @param {string} overlay_text_background_style - Background style for overlay labels (required)
  @param {string} image_sizes - Sizes attribute for responsive images (required)
  @param {string} [media_aspect_ratio] - Specific aspect ratio for media rendering
  @param {boolean} [prioritize_loading] - Whether to prioritize loading this media

  @example
  Basic gallery media
  {% render 'gallery-media', block: block, aspect_ratio: 'landscape', label_style: 'overlay', label_size: 'medium', overlay_text_color: '#ffffff', overlay_text_background: '#000000', overlay_text_background_style: 'solid', image_sizes: '50vw' %}
{% enddoc %}

{%- liquid
  assign label_is_overlay = false

  if label_style == 'overlay'
    assign label_is_overlay = true
  endif
-%}

{% capture item_label %}
  <div class="gallery-item__label {{ label_size }} ff-body">
    {%- if block.settings.title != blank -%}
      <h4 class="gallery-item__title fs-heading-5-base ff-heading">{{ block.settings.title }}</h4>
    {% endif %}
    {{ block.settings.text }}
  </div>
{% endcapture %}

<div
  class="
    gallery-item
    gallery-item--label-{{ label_style }}
    gallery-item--label-background-{{ overlay_text_background_style }}
    animation--item
    {{ block.shopify_attributes }}
  "
  style="
    --overlay-text-color: {{ overlay_text_color }};
    --label-background: {{ overlay_text_background }};
    --label-gradient-start: {{ overlay_text_background | color_modify: 'alpha', 0.4 }};
    --label-gradient-mid: {{ overlay_text_background | color_modify: 'alpha', 0.2 }};
    --label-gradient-end: {{ overlay_text_background | color_modify: 'alpha', 0 }};
  "
>
  <div class="gallery-item__image-wrapper hover">
      {% render 'media',

      media: block.settings.image,

      enable_product_lightbox: true,
      loop_video: section.settings.enable_video_looping,
      aspect_ratio: media_aspect_ratio,
      sizes: '90vw',
      prioritize_loading: prioritize_loading,
      within_carousel: true
    %}

    {%- if label_is_overlay -%}
      {{ item_label }}
    {%- endif -%}
  </div>

  {{ item_label }}
</div>
