class L{constructor(){this.favorites=this.fetchFavorites(),this.displayCountEls=document.querySelectorAll("[data-js-favorites-count]"),this.updateDisplayCount(),console.debug("Favorites",this.favorites)}fetchFavorites(){const e=localStorage.getItem("favorites");let t=[];if(e)try{const s=JSON.parse(e);Array.isArray(s)&&(t=s)}catch(s){console.error("Error parsing favorites from localStorage",s)}return t}removeFavorite(e){this.favorites=this.favorites.filter(t=>t.handle!==e.handle),console.debug("Favorites after removal",this.favorites),this.updateLocalStorage(this.favorites),this.updateDisplayCount()}addFavorite(e){this.favorites.push(e),console.debug("Favorites after addition",this.favorites),this.updateLocalStorage(this.favorites),this.updateDisplayCount()}updateDisplayCount(){this.displayCountEls.forEach(e=>{e.textContent=this.favorites.length,this.favorites.length===0?e.classList.add("opacity-0"):e.classList.remove("opacity-0")})}updateLocalStorage(e){localStorage.setItem("favorites",JSON.stringify(e))}}const g=new L;class I extends HTMLElement{constructor(){super(),this.productGrid=this.querySelector("[data-product-grid]"),this.spinner=this.querySelector("[data-spinner]"),this.emptyStateEl=this.querySelector("[data-empty-state]"),g.favorites.length>0?this.fetchProducts():(this.emptyStateEl.classList.remove("hidden"),this.spinner.classList.add("hidden"))}async fetchProductHTML(e){let t=`/products/${e.handle}?view=card`;e.variantId&&(t+=`&variant=${e.variantId}`);const s=await fetch(t).then(l=>l.text());return new DOMParser().parseFromString(s,"text/html").querySelector(".product-item")}batchArray(e,t){const s=[];for(let o=0;o<e.length;o+=t)s.push(e.slice(o,o+t));return s}async fetchProducts(){const e=this.batchArray(g.favorites,4);await Promise.all(e.map(async t=>{const s=await Promise.all(t.map(async o=>this.fetchProductHTML(o)));return s.forEach(o=>{try{return this.productGrid.appendChild(o)}catch{}}),s})),this.spinner.classList.add("hidden")}}customElements.define("favorite-products",I);class V extends HTMLElement{constructor(){super(),this.productHandle=this.dataset.productHandle,this.variantId=this.dataset.variantId,this.favoriteItem={handle:this.productHandle},this.variantId&&(this.favoriteItem.variantId=this.variantId),this.addEventListener("click",this.handleClick.bind(this)),this.updateState()}get isFavorite(){return g.favorites.some(e=>JSON.stringify(e)===JSON.stringify(this.favoriteItem))}handleClick(){this.isFavorite?this.removeFavorite():this.addFavorite(),this.updateState()}removeFavorite(){g.removeFavorite(this.favoriteItem)}addFavorite(){g.addFavorite(this.favoriteItem)}updateState(){this.isFavorite?this.setAttribute("added",""):this.removeAttribute("added")}}customElements.define("add-favorite",V);class x extends HTMLElement{constructor(){super(),console.debug("ReloadOnEvent constructor"),this.event=this.getAttribute("data-event"),this.section=this.closest(".shopify-section"),this.sectionId=this.section.id,this.shopifySectionId=this.sectionId.replace("shopify-section-",""),this.container=this.section.querySelector("[data-section-type]"),this.sectionType=this.container.getAttribute("data-section-type"),this.init()}init(){this.url=new URL(window.location.href),this.url.searchParams.set("sections",this.shopifySectionId),console.debug("ReloadOnEvent init, adding event listener for",this.event),document.addEventListener(this.event,this.handleChange.bind(this))}handleChange(e){console.debug("ReloadOnEvent handleChange, reloading - event.detail:",e.detail),e.detail.variant&&this.url.searchParams.set("variant",e.detail.variant.id),this.reload()}async reload(){await this.setNewHTML(),window.Shopify.theme.sections.unload(this.container);const e=this.querySelector(`[data-section-type="${this.sectionType}"]`);if(!e){console.error(`ReloadOnEvent reload: Failed to find the new container element with type [${this.sectionType}] after updating innerHTML.`);return}this.container=e,window.Shopify.theme.sections.load(this.sectionType,this.container),this.dispatchEvent(new CustomEvent("reload-on-event:loaded",{bubbles:!0,detail:{sectionId:this.sectionId,shopifySectionId:this.shopifySectionId}}))}async setNewHTML(){try{const e=await this.fetchSectionHTML();if(!e){console.error("ReloadOnEvent setNewHTML: Fetched HTML is empty or null for section",this.shopifySectionId);return}const o=new DOMParser().parseFromString(e,"text/html").getElementById(this.sectionId);if(o){const n=this.findSelfInHTML(o);n?this.innerHTML=n.innerHTML:console.warn('ReloadOnEvent setNewHTML: Could not find "self" (<reload-on-event>) element within the fetched section HTML using findSelfInHTML.')}else console.warn("ReloadOnEvent setNewHTML: Could not find the parent Shopify section element in the fetched HTML. Section ID:",this.sectionId)}catch(e){console.error("ReloadOnEvent setNewHTML: Error fetching or parsing HTML:",e)}}async fetchSectionHTML(){console.debug("ReloadOnEvent fetchSectionHTML, url",this.url);const e=await fetch(this.url).then(t=>t.json());return console.debug("ReloadOnEvent fetchSectionHTML, sectionJSON",e),e[this.shopifySectionId]}findSelfInHTML(e){const t=[];let s=this;for(;s;){let o=s.tagName.toLowerCase();if(s.parentElement){const n=Array.from(s.parentElement.children).indexOf(s)+1;n>1&&(o+=`:nth-child(${n})`)}if(t.unshift(o),s=s.parentElement,s&&s.id===this.sectionId)break}return e.querySelector(t.join(" > "))}}customElements.define("reload-on-event",x);class C extends HTMLElement{constructor(){super(),this.select=this.querySelector("#marketSelector")}connectedCallback(){this.select&&this.setupEventListeners()}setupEventListeners(){this.select.addEventListener("change",e=>this.handleMarketChange(e))}handleMarketChange(e){const s=e.target.selectedOptions[0].dataset.url;s&&(window.location.href=s)}}customElements.define("currency-selector",C);class R extends HTMLElement{constructor(){super(),Shopify.designMode&&(this.blockSelectHandler=this.blockSelectHandler||this.handleBlockSelect.bind(this),this.section.addEventListener("shopify:block:select",this.blockSelectHandler))}connectedCallback(){this.init(),this.addEventListener("click",this.handleClick.bind(this))}init(){const{sectionId:e,activeTextClass:t}=this.dataset;this.section=document.getElementById(e),this.activeTextClass=t,this.backgroundBlob=this.querySelector(".background-blob");const s=this.querySelector("[data-navigate-tab]");if(!s)return console.warn("section-tab-navigator doesn't include any navigation links",this);this.navigate(s)}handleClick(e){const t=e.target.closest("[data-navigate-tab]");return t?(this.navigate(t),!0):!1}navigate(e){this.updateUI(e);const t=e.dataset.navigateTab;this.section.querySelectorAll("[data-tab]").forEach(o=>{if((t==="all"||t==="alla")&&!o.hasAttribute("data-not-all"))return o.classList.remove("js-hidden");const r=o.dataset.tab.split(",").includes(t);o.classList.toggle("js-hidden",!r)}),this.target=e,this.section.dispatchEvent(new CustomEvent("sectionTabNavigated",{detail:{tabName:t}}))}updateUI(e){if(this.target&&this.activeTextClass&&this.target.classList.remove(this.activeTextClass),e&&this.backgroundBlob){this.activeTextClass&&e.classList.add(this.activeTextClass);const t=e.getBoundingClientRect(),s=e.offsetParent.getBoundingClientRect();this.backgroundBlob.style.width=`${t.width}px`,this.backgroundBlob.style.left=`${t.left-s.left}px`}}handleBlockSelect(e){if(handleClick(e))return;const s=e.target;if(!s)return console.warn("No block selected");if(e.target.classList.contains("js-hidden")){let o=[];if(tabEl.hasAttribute("data-tab")&&(o=tabEl.dataset.tab.split(",")),tabEl.hasAttribute("data-flickity-tab")&&(o=s.dataset.flickityTab.split(",")),o.length>0){const n=slideTabs[0];this.navigate(n)}}}}customElements.define("section-tab-navigator",R);class T extends HTMLElement{constructor(){super()}connectedCallback(){this.init(),this.addEventListener("input",this.handleInput.bind(this))}init(){this.activeTextClass=this.dataset.activeTextClass,this.backgroundBlob=this.querySelector(".background-blob");const e=this.querySelector('input[type="radio"]:checked');if(!e)return console.warn("section-tab-navigator doesn't include any navigation links",this);this.handleInput({target:e})}handleInput(e){const t=e.target.closest("li");return t?(this.updateUI(t),!0):!1}updateUI(e){if(this.target&&this.activeTextClass&&this.target.classList.remove(this.activeTextClass),e&&this.backgroundBlob){this.activeTextClass&&e.classList.add(this.activeTextClass);const t=e.getBoundingClientRect(),s=e.offsetParent.getBoundingClientRect();this.backgroundBlob.style.width=`${t.width}px`,this.backgroundBlob.style.left=`${t.left-s.left}px`,this.backgroundBlob.style.top=`${t.top-s.top}px`,this.target=e}}}customElements.define("radio-blob",T);function y(i){setTimeout(()=>{requestAnimationFrame(i)},0)}function w(i,e){return i.length<=e?i:i.slice(0,e)+"..."}class A extends HTMLElement{constructor(){super(),this.expanded=!1}connectedCallback(){this.chars=parseInt(this.dataset.chars,10)||null,this.lines=parseInt(this.dataset.lines||3,10),this.init()}init(){this.originalContent=this.innerHTML,this.wrapper=document.createElement("div"),this.wrapper.classList.add("expand-text-wrapper"),this.contentEl=document.createElement("div"),this.contentEl.classList.add("expand-text-content"),this.button=document.createElement("button"),this.button.type="button",this.button.classList.add("expand-text-toggle","mt-2","text-sm","font-medium","underline","focus:outline-none","hidden"),this.button.textContent="See more",this.button.addEventListener("click",()=>this.toggleExpand());let e;if(this.chars!==null)e=this.chars;else{const t=document.createElement("div");t.style.position="absolute",t.style.visibility="hidden",t.style.width="auto",t.style.height="auto",t.innerHTML=this.originalContent,document.body.appendChild(t);const s=this.parentElement?this.parentElement.offsetWidth:500;t.style.width=`${s}px`;const o="ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz 0123456789",n=document.createElement("div");n.textContent=o,n.style.whiteSpace="nowrap",t.appendChild(n);const r=o.length,l=n.offsetWidth;e=Math.floor(s/l*r)*this.lines,document.body.removeChild(t)}this.setupContent(e),this.innerHTML="",this.wrapper.appendChild(this.contentEl),this.appendChild(this.wrapper),this.appendChild(this.button)}setupContent(e){const t=document.createElement("div");t.innerHTML=this.originalContent;const s=t.textContent||t.innerText||"";if(s.length>e){this.fullContent=this.originalContent;let n=e;for(;n>0&&s.charAt(n)!==" "&&s.charAt(n)!==".";)n--;n===0&&(n=e);const r=w(s,n);this.contentEl.textContent=r,this.button.classList.remove("hidden"),this.truncated=!0,this.maxChars=n}else this.contentEl.innerHTML=this.originalContent,this.truncated=!1}toggleExpand(){if(this.expanded=!this.expanded,this.expanded)this.contentEl.innerHTML=this.originalContent,this.button.textContent="See less";else{const e=document.createElement("div");e.innerHTML=this.originalContent;const t=e.textContent||e.innerText||"",s=w(t,this.maxChars);this.contentEl.textContent=s,this.button.textContent="See more"}}}customElements.define("expand-text",A);class k{constructor(){this.timeoutDuration=1e4,this.videoStates=new Map,this.observer=null,this.externalPlayers=new Map,this.init()}init(){this.observer=new IntersectionObserver(this.handleIntersection.bind(this),{threshold:.5}),this.observeVideos(),this.listenForExternalPlayers()}observeVideos(){document.querySelectorAll("video").forEach(e=>{this.observer.observe(e),this.videoStates.set(e,{timeoutId:null,type:"html5"})}),document.querySelectorAll("[data-video-provider]").forEach(e=>{this.observer.observe(e),this.videoStates.set(e,{timeoutId:null,type:"external",provider:e.dataset.videoProvider})})}listenForExternalPlayers(){window.addEventListener("youtube-player-ready",e=>{const{element:t,player:s}=e.detail;this.externalPlayers.set(t,{player:s,type:"youtube"}),this.videoStates.has(t)||(this.observer.observe(t),this.videoStates.set(t,{timeoutId:null,type:"external",provider:"youtube"}))}),window.addEventListener("vimeo-player-ready",e=>{const{element:t,player:s}=e.detail;this.externalPlayers.set(t,{player:s,type:"vimeo"}),this.videoStates.has(t)||(this.observer.observe(t),this.videoStates.set(t,{timeoutId:null,type:"external",provider:"vimeo"}))})}handleIntersection(e){e.forEach(t=>{const s=t.target,o=this.videoStates.get(s);o&&(o.type==="html5"?this.handleHTML5Video(s,t.isIntersecting,o):o.type==="external"&&this.handleExternalVideo(s,t.isIntersecting,o))})}handleHTML5Video(e,t,s){t?(s.timeoutId&&(clearTimeout(s.timeoutId),s.timeoutId=null),e.dataset.autoPaused==="true"&&(e.play(),e.dataset.autoPaused=!1)):!e.muted&&!e.paused&&(e.pause(),e.dataset.autoPaused=!0,s.timeoutId=setTimeout(()=>{e.dataset.autoPaused=!1,s.timeoutId=null},this.timeoutDuration))}handleExternalVideo(e,t,s){const o=this.externalPlayers.get(e);if(!o)return;const{player:n,type:r}=o;if(t)s.timeoutId&&(clearTimeout(s.timeoutId),s.timeoutId=null),e.dataset.autoPaused==="true"&&(r==="youtube"?n.playVideo():r==="vimeo"&&n.play(),e.dataset.autoPaused=!1);else if(r==="youtube"){const l=n.getPlayerState();(l===1||l===3)&&(n.pauseVideo(),e.dataset.autoPaused=!0,s.timeoutId=setTimeout(()=>{e.dataset.autoPaused=!1,s.timeoutId=null},this.timeoutDuration))}else r==="vimeo"&&n.getPaused().then(l=>{l||(n.pause(),e.dataset.autoPaused=!0,s.timeoutId=setTimeout(()=>{e.dataset.autoPaused=!1,s.timeoutId=null},this.timeoutDuration))})}observeNewVideos(){document.querySelectorAll("video").forEach(e=>{this.videoStates.has(e)||(this.observer.observe(e),this.videoStates.set(e,{timeoutId:null,type:"html5"}))}),document.querySelectorAll("[data-video-provider]").forEach(e=>{this.videoStates.has(e)||(this.observer.observe(e),this.videoStates.set(e,{timeoutId:null,type:"external",provider:e.dataset.videoProvider}))})}destroy(){this.videoStates.forEach(e=>{e.timeoutId&&clearTimeout(e.timeoutId)}),this.observer.disconnect(),this.videoStates.clear(),this.externalPlayers.clear(),window.removeEventListener("youtube-player-ready",this.listenForExternalPlayers),window.removeEventListener("vimeo-player-ready",this.listenForExternalPlayers)}}new k;class M extends HTMLElement{constructor(){super(),console.log("[ResponsiveVideo] Custom element created")}connectedCallback(){console.log("[ResponsiveVideo] Element connected to DOM",this),this.state={isMuted:!0,isPlaying:!1,resizeObserver:null,currentSource:null,autoplayAttempted:!1},this.setupElements(),this.bindEvents(),this.setupObservers(),this.setInitialSource()}get autoplay(){return this.hasAttribute("autoplay")||this.hasAttribute("data-autoplay")}setupElements(){var e;this.videoWrapper=this.querySelector(".responsive-video-wrapper")||this,this.video=this.querySelector("video"),this.posterImage=this.querySelector(".poster-image"),this.playButton=this.querySelector("[data-play-toggle]"),this.soundButton=this.querySelector("[data-sound-toggle]"),this.playIcon=this.querySelector("[data-icon-play]"),this.soundOnIcon=this.querySelector("[data-icon-sound-on]"),this.soundOffIcon=this.querySelector("[data-icon-sound-off]"),this.autoplay&&this.video&&(this.video.muted=!0),this.sources=Array.from(((e=this.video)==null?void 0:e.querySelectorAll("source"))||[]),console.log("[ResponsiveVideo] Found video sources:",this.sources.length),this.sources.forEach((t,s)=>{const o=t.getAttribute("media")||"default";console.log(`[ResponsiveVideo] Source ${s}:`,{src:t.src,media:o,type:t.type})}),this.video?this.video.style.opacity="0":console.error("[ResponsiveVideo] No video element found")}getActiveSource(){if(!this.video||!this.sources.length)return console.error("[ResponsiveVideo] Cannot get active source - video or sources missing"),null;const e=window.innerWidth;console.log("[ResponsiveVideo] Current viewport width:",e);const t=this.sources.find(n=>{const r=n.getAttribute("media");if(!r||!r.includes("max-width"))return!1;const l=r.match(/\d+/);if(!l)return!1;const v=parseInt(l[0]),f=e<=v;return console.log(`[ResponsiveVideo] Checking mobile source (max-width: ${v}px): ${f}`),f});if(t)return console.log("[ResponsiveVideo] Using mobile source:",t.src),t;const s=this.sources.find(n=>{const r=n.getAttribute("media");if(!r||!r.includes("min-width"))return!1;const l=r.match(/\d+/);if(!l)return!1;const v=parseInt(l[0]),f=e>=v;return console.log(`[ResponsiveVideo] Checking large source (min-width: ${v}px): ${f}`),f});if(s)return console.log("[ResponsiveVideo] Using large source:",s.src),s;const o=this.sources.find(n=>!n.hasAttribute("media"))||this.sources[0];return console.log("[ResponsiveVideo] Using default source:",o.src),o}bindEvents(){this.videoWrapper.addEventListener("click",e=>{e.target.closest("[data-sound-toggle]")||(this.togglePlay(),e.preventDefault())}),console.log("[ResponsiveVideo] Video wrapper click event bound"),this.soundButton&&(this.soundButton.addEventListener("click",this.toggleSound.bind(this)),console.log("[ResponsiveVideo] Sound button event bound")),this.video&&(console.log("[ResponsiveVideo] Binding video events"),this.video.addEventListener("play",()=>{console.log("[ResponsiveVideo] Video play event"),this.state.isPlaying=!0,this.updateControlsUI()}),this.video.addEventListener("pause",()=>{console.log("[ResponsiveVideo] Video pause event"),this.state.isPlaying=!1,this.updateControlsUI()}),this.video.addEventListener("canplay",()=>{console.log("[ResponsiveVideo] Video canplay event"),this.handleVideoLoaded()}),this.video.addEventListener("loadstart",()=>{console.log("[ResponsiveVideo] Video loadstart event")}),this.video.addEventListener("loadeddata",()=>{console.log("[ResponsiveVideo] Video loadeddata event"),this.autoplay&&!this.state.autoplayAttempted&&this.attemptAutoplay()}),this.video.addEventListener("error",e=>{console.error("[ResponsiveVideo] Video error:",e,this.video.error)}))}handleVideoLoaded(){console.log("[ResponsiveVideo] Video loaded and can play"),this.posterImage?(this.posterImage.style.opacity="0",console.log("[ResponsiveVideo] Hiding poster image")):console.log("[ResponsiveVideo] No poster image found"),this.video.style.opacity="1",this.autoplay&&!this.state.autoplayAttempted&&this.attemptAutoplay()}attemptAutoplay(){if(!this.video)return;this.state.autoplayAttempted=!0,console.log("[ResponsiveVideo] Attempting autoplay"),this.isElementVisible()?(console.log("[ResponsiveVideo] Element is visible, playing video"),this.video.muted=!0,setTimeout(()=>{this.video.play().then(()=>{console.log("[ResponsiveVideo] Autoplay started successfully"),this.state.isPlaying=!0,this.updateControlsUI()}).catch(t=>{console.error("[ResponsiveVideo] Autoplay failed:",t),setTimeout(()=>{console.log("[ResponsiveVideo] Retrying autoplay..."),this.video.play().then(()=>{console.log("[ResponsiveVideo] Autoplay retry successful"),this.state.isPlaying=!0,this.updateControlsUI()}).catch(s=>console.error("[ResponsiveVideo] Autoplay retry failed:",s))},1e3)})},100)):console.log("[ResponsiveVideo] Element not visible, skipping autoplay")}isElementVisible(){const e=this.getBoundingClientRect(),t=e.top<window.innerHeight&&e.bottom>0&&e.left<window.innerWidth&&e.right>0;return console.log("[ResponsiveVideo] Element visibility check:",t),t}setupObservers(){"ResizeObserver"in window?(this.state.resizeObserver=new ResizeObserver(this.handleResize.bind(this)),this.state.resizeObserver.observe(document.documentElement),console.log("[ResponsiveVideo] Resize observer set up")):(window.addEventListener("resize",this.handleResize.bind(this)),console.log("[ResponsiveVideo] Window resize event fallback set up"))}handleResize(){clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{console.log("[ResponsiveVideo] Window resized, updating source"),this.updateSourceBasedOnViewport()},150)}setInitialSource(){const e=this.getActiveSource();if(!e||!this.video){console.error("[ResponsiveVideo] Cannot set initial source - activeSource or video missing");return}console.log("[ResponsiveVideo] Setting initial source to:",e.src),this.video.src=e.src,this.state.currentSource=e.src,console.log("[ResponsiveVideo] Loading video"),this.video.load()}updateSourceBasedOnViewport(){const e=this.getActiveSource();if(!e||!this.video){console.error("[ResponsiveVideo] Cannot update source - activeSource or video missing");return}if(this.state.currentSource!==e.src){console.log("[ResponsiveVideo] Source changing from",this.state.currentSource,"to",e.src);const t=!this.video.paused;console.log("[ResponsiveVideo] Video was playing:",t),this.video.src=e.src,this.state.currentSource=e.src,this.video.style.opacity="0",this.posterImage&&(this.posterImage.style.opacity="1",console.log("[ResponsiveVideo] Showing poster image while loading new source")),console.log("[ResponsiveVideo] Loading new video source"),this.video.load(),t&&(console.log("[ResponsiveVideo] Restoring playback after source change"),this.video.play().catch(s=>console.error("[ResponsiveVideo] Error playing video after source change:",s)))}else console.log("[ResponsiveVideo] Source unchanged, no update needed")}togglePlay(){if(!this.video){console.error("[ResponsiveVideo] Cannot toggle play - video missing");return}if(this.video.paused){if(!this.video.src){const e=this.getActiveSource();if(e)console.log("[ResponsiveVideo] Setting missing source before playing:",e.src),this.video.src=e.src,this.video.load();else{console.error("[ResponsiveVideo] No source available to play");return}}console.log("[ResponsiveVideo] Playing video"),this.video.play().catch(e=>console.error("[ResponsiveVideo] Error playing video:",e)),this.state.isPlaying=!0}else console.log("[ResponsiveVideo] Pausing video"),this.video.pause(),this.state.isPlaying=!1;this.updateControlsUI()}toggleSound(){if(!this.video){console.error("[ResponsiveVideo] Cannot toggle sound - video missing");return}this.video.muted=!this.video.muted,this.state.isMuted=this.video.muted,console.log("[ResponsiveVideo] Toggle sound, muted:",this.video.muted),this.updateControlsUI()}updateControlsUI(){console.log("[ResponsiveVideo] Updating UI controls"),this.playIcon&&this.video&&(this.video.paused?(this.playIcon.classList.remove("hidden"),console.log("[ResponsiveVideo] Showing play icon")):(this.playIcon.classList.add("hidden"),console.log("[ResponsiveVideo] Hiding play icon"))),this.soundOnIcon&&this.soundOffIcon&&this.video&&(this.video.muted?(this.soundOnIcon.classList.add("hidden"),this.soundOffIcon.classList.remove("hidden"),console.log("[ResponsiveVideo] Showing sound off icon")):(this.soundOnIcon.classList.remove("hidden"),this.soundOffIcon.classList.add("hidden"),console.log("[ResponsiveVideo] Showing sound on icon")))}disconnectedCallback(){console.log("[ResponsiveVideo] Element disconnected from DOM"),this.destroy()}destroy(){console.log("[ResponsiveVideo] Destroying video component"),this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.videoWrapper&&this.videoWrapper.removeEventListener("click",this.togglePlay),this.soundButton&&this.soundButton.removeEventListener("click",this.toggleSound),this.video&&(this.video.removeEventListener("play",this.updateControlsUI),this.video.removeEventListener("pause",this.updateControlsUI),this.video.removeEventListener("canplay",this.handleVideoLoaded),this.video.removeEventListener("loadstart",this.handleLoadStart),this.video.removeEventListener("loadeddata",this.handleLoadedData),this.video.removeEventListener("error",this.handleVideoError)),this.state&&this.state.resizeObserver?this.state.resizeObserver.disconnect():window.removeEventListener("resize",this.handleResize)}}customElements.get("responsive-video")||(customElements.define("responsive-video",M),console.log("[ResponsiveVideo] Custom element defined"));const{icons:p}=window.theme;async function O({childSelector:i,galerySelector:e,mainClass:t,addListener:s=!1}){const o=document.querySelectorAll(i);if(!o.length)return;const n=a=>{const d=a.dataset.pswpType||"image",c=parseInt(a.dataset.pswpWidth,10),h=parseInt(a.dataset.pswpHeight,10);(isNaN(c)||isNaN(h))&&console.warn("Lightbox element missing valid width/height data attributes:",a);const u={type:d,width:c||0,height:h||0,element:a};return d==="video"||(u.src=a.getAttribute("href")||a.dataset.pswpSrc,u.src||console.warn("Image lightbox element missing href and data-pswp-src:",a)),u},r=Array.from(o).map(n),l=await import(window.flu.chunks.photoswipe),{PhotoSwipeLightbox:v,PhotoSwipe:f}=l;if(!v||!f){console.error("PhotoSwipe modules not found in the imported chunk.");return}const m=new v({gallery:e,children:i,showHideAnimationType:"zoom",pswpModule:f,mainClass:t,bgOpacity:1,arrowPrevSVG:p==null?void 0:p.chevron,arrowNextSVG:p==null?void 0:p.chevron,closeSVG:p==null?void 0:p.close,zoomSVG:p==null?void 0:p.zoom,dataSource:r});m.on("contentLoad",a=>{const{content:d}=a,c=d.data;if(console.log("contentLoad",a,c),c.type==="video"){const h=c.element;console.log("videoElement",h.dataset);const u=(h==null?void 0:h.dataset.pswpVideo)||(h==null?void 0:h.getAttribute("href"));h&&u?(a.preventDefault(),d.element=P(u)):(console.warn("PhotoSwipe: Video item type detected, but failed to find video source on element:",h),d.state="error")}}),m.on("contentActivate",a=>{const{content:d}=a,c=d.element;if(d.data.type==="video"){console.log("contentActivate",a,d,c);const u=c.querySelector("video");u?(d.state="loading",H(u,d)):(console.error("PhotoSwipe: Failed to find video element within the created container."),d.state="error",d.onError())}}),m.on("contentDeactivate",a=>{const{content:d}=a,c=d.element;if(d.data.type==="video"){console.log("contentDeactivate",a,d,c);const u=c.querySelector("video");u&&u.pause()}}),s&&o.forEach((a,d)=>{a.addEventListener("click",c=>{console.log("opening w custom clicker listneer mate click",c),c.preventDefault(),m.loadAndOpen(d)})});try{m.init()}catch(a){console.error("PhotoSwipe: Failed to initialize lightbox.",a)}}window.customLightbox=O;const P=i=>{const e=document.createElement("div");e.className="pswp__video-wrapper",Object.assign(e.style,{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",background:"#000"});const t=document.createElement("video");return t.src=i,t.controls=!0,Object.assign(t.style,{maxWidth:"100%",maxHeight:"100%",display:"block"}),e.appendChild(t),e},H=(i,e)=>{let t=!1;const s=()=>{t||(t=!0,i.play(),e.onLoaded())},o=n=>{console.error(`PhotoSwipe: Video loading failed for src: ${i.src}`,n),e.onError()};i.addEventListener("loadeddata",s),i.addEventListener("canplay",s),i.addEventListener("error",o),i.addEventListener("stalled",o),i.readyState>=3&&s()};function b(i){const e=t=>{t.dataset.src&&!t.src&&(t.src=t.dataset.src),t.dataset.srcset&&!t.srcset&&(t.srcset=t.dataset.srcset)};i.parentNode.tagName==="PICTURE"?Array.from(i.parentNode.children).forEach(t=>{e(t)}):e(i)}function S(i){return i.forEach(e=>b(e))}function E(){if(!("loading"in HTMLImageElement.prototype)&&"IntersectionObserver"in window){console.log("intersection observer");const i=new IntersectionObserver((e,t)=>{e.forEach(s=>{if(s.isIntersecting){const o=s.target;b(o),t.unobserve(o)}})},{rootMargin:"0px 0px 500px 0px"});document.querySelectorAll('[loading="lazy"]').forEach(e=>{i.observe(e)})}else{const i=[],e=[];document.querySelectorAll('[loading="lazy"], [data-src]').forEach(t=>{if(t.hasAttribute("data-load-dom"))i.push(t);else if(t.hasAttribute("data-load-load"))e.push(t);else{if(t.hasAttribute("data-load-manual"))return;b(t)}}),N(i),q(e)}}function N(i){console.debug("loadImagesOnDOMLoaded",i);const e=()=>y(()=>S(i));if(document.readyState!="loading")return e();document.addEventListener("DOMContentLoaded",e)}function q(i){console.debug("loadImagesOnLoaded",i);const e=()=>y(()=>S(i));if(document.readyState=="complete")return e();window.addEventListener("load",e)}y(E);document.addEventListener("DOMContentLoaded",E);document.addEventListener("shopify:section:load",()=>y(E));document.addEventListener("DOMContentLoaded",()=>{document.addEventListener("click",i=>{const e=i.target.tagName==="A"?i.target:i.target.closest("a");e&&e.tagName==="A"&&window.location.hostname!==new URL(e.href).hostname&&(e.target="_blank")}),document.addEventListener("click",i=>{i.target.tagName==="A"&&window.location.hostname===new URL(i.target.href).hostname&&i.target.href.includes("#")&&(document.getElementsByTagName("html")[0].style.scrollBehavior="smooth",setTimeout(()=>{document.getElementsByTagName("html")[0].style.scrollBehavior=""},1e3))})});window.theme=window.theme||{};console.log("main.bundle.js loaded");document.dispatchEvent(new CustomEvent("theme:loaded"));
//# sourceMappingURL=main.bundle.js.map
