{% doc %}
  @param content - Content to force lazy load
  @param {string} [lazy_type] - When to load image: 'dom', 'load', or 'manual'

  @example
  {% render 'force-lazy-content', content: '<img src="https://via.placeholder.com/150" alt="Placeholder">' %}
{% enddoc %}

{%- capture src_template -%}
  {%- if lazy_type != blank %} data-load-{{ lazy_type }}
  {%- endif %} data-src="
{%- endcapture -%}

{%- capture poster_template %} data-poster="{%- endcapture -%}

{%- liquid
  assign lazy_content = content | replace: ' src="', src_template
  assign lazy_content = lazy_content | replace: ' poster="', poster_template
-%}

{{- lazy_content }}
