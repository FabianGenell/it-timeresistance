{% doc %}
  Renders an inline video element with wrapper and controls

  @param {object} video - Video object or URL (required)
  @param {boolean} [controls] - Whether to show video controls
  @param {boolean} [loop] - Whether video should loop (default: true)
  @param {string} [wrapper_class] - CSS classes for the wrapper element
  @param {string} [aspect_ratio] - Aspect ratio for the video
  @param {string} [focal_point] - Focal point for video positioning
  @param {string} [focal_alignment] - Manual focal alignment override
  @param {boolean} [animate] - Whether to add animation classes

  @example
  Basic video
  {% render 'video', video: section.settings.video %}
  @example
  With controls and custom aspect ratio
  {% render 'video', video: product_video, controls: true, aspect_ratio: 'landscape', wrapper_class: 'product-video' %}
{% enddoc %}
{%- liquid
  if focal_point
    assign focal_alignment = focal_point | replace: '_', ' '
  endif

  assign video_should_loop = true
  unless loop
    assign video_should_loop = false
  endunless
-%}

<div
  class="
    video-wrapper {{ wrapper_class }}
    {% if aspect_ratio != blank and aspect_ratio != 'natural' %}aspect-ratio--{{ aspect_ratio }}{% endif %}
    {% if animate %}video-wrapper--animate{% endif %}
  "
  {%- if focal_alignment -%}
    style="--focal-alignment: {{ focal_alignment }};"
  {%- endif -%}
>
  {% liquid
    assign video_html = video | video_tag: image_size: '1800x', class: 'video', autoplay: true, loop: video_should_loop, muted: true, controls: controls
    assign video_poster_alt = '<img alt="' | append: video.title | append: '"'
    assign video_html = video_html | replace: '<img ', video_poster_alt
  %}
  {{ video_html }}
  {% render 'video-pause' %}
</div>
